<main class="home">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>Fresh Flowers Delivered to Your Door</h1>
      <button class="btn-shop-now" (click)="scrollToCollection()">
        Shop Now
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <polyline points="19 12 12 19 5 12"></polyline>
        </svg>
      </button>
    </div>
  </section>


  <!-- All Products Section -->
  <section class="all-products" id="collection">
    <div class="container">
      <div class="section-header">
        <h2>Our Collection</h2>
        <p>Handpicked fresh blooms for every moment</p>
      </div>

      <!-- Category Filters -->
      <div class="category-filters">
        <button
          class="filter-pill"
          [class.active]="selectedCategory === 'All'"
          (click)="selectCategory('All')">
          All
        </button>
        @for (cat of categories; track cat) {
          <button
            class="filter-pill"
            [class.active]="selectedCategory === cat"
            (click)="selectCategory(cat)">
            {{ cat }}
          </button>
        }
      </div>

      <div class="product-grid">
        @for (product of filteredProducts; track product.id) {
          <div class="product-card">
            <a [routerLink]="['/products', product.id]" class="product-image">
              <img [src]="product.image" [alt]="product.name">
              <div class="image-overlay">
                <span class="view-label">View Details</span>
              </div>
              <span class="category-badge">{{ product.category }}</span>
            </a>
            <div class="product-info">
              <h3>{{ product.name }}</h3>
              <div class="product-footer">
                <span class="price">₹{{ product.price.toFixed(2) }}</span>
                @if (getQuantity(product.id) === 0) {
                  <button class="btn-add" (click)="addToCart(product)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                      <circle cx="9" cy="21" r="1"></circle>
                      <circle cx="20" cy="21" r="1"></circle>
                      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    Add
                  </button>
                } @else {
                  <div class="quantity-control">
                    <button class="qty-btn" (click)="decrementQuantity(product)">−</button>
                    <span class="qty-value">{{ getQuantity(product.id) }}</span>
                    <button class="qty-btn" (click)="incrementQuantity(product)">+</button>
                  </div>
                }
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="newsletter">
    <div class="container">
      <h2>Stay in Bloom</h2>
      <p>Subscribe to our newsletter for exclusive offers and flower care tips!</p>
      <form class="newsletter-form" (submit)="$event.preventDefault()">
        <input type="email" placeholder="Enter your email" required>
        <button type="submit" class="btn-primary">Subscribe</button>
      </form>
    </div>
  </section>
</main>

<div class="cart-toast" [class.show]="toastVisible()" [class.removed]="toastType() === 'removed'">
  <div class="toast-icon">
    @if (toastType() === 'added') {
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    } @else {
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"></path>
        <path d="M10 11v6"></path>
        <path d="M14 11v6"></path>
      </svg>
    }
  </div>
  <div class="toast-text">
    <span class="toast-title">{{ toastType() === 'added' ? 'Added to Cart' : 'Removed from Cart' }}</span>
    <span class="toast-name">{{ toastProductName() }}</span>
  </div>
</div>
